---
# This YAML file contains sample configuration information for the default data grid.  
# NOTE:  this version is not complete.  It has only 3 categories and is intended as a starting point for discussion/development.

inherits_from: #for v2. name of another recipe which this one will partially overwrite
name: global_default #a short, unique name for the recipe
title:  Global Default Essential Data #a display name for the recipe
type:  #for v2. this will let us distinguish different types of data grid like 'preparedness' or 'crisis' or 'hdx curated' or 'automatically generated', but not used in v1
description: This data grid is configured based on a glboal default list of essential datasets for humanitarian data readiness. #for v2. we may show this in the interface somewhere to help users understand different recipes, but not used in v1
categories: #list of the high level groupings visible in the data grid, like 'Food Security'
  - name: administration #a short unique name for the category
    title: Administration #the text that appears at the top of each grouping in the data grid
    type: #for v2. we may want to distinguish between 'preparedness' and 'crisis' at the category level
    description: Data relating to the administration of a location, most importantly, the administrative units (regions, distrcits, counties, etc.). #text that appears on hover of the title
    data_series: #list of the actual indicators or data series into which the datasets are categorized, like 'food prices'
      - name:  administrative_divisions #a short unique name for the data series
        title: Administrative Divisions #the text that appears in the interface to at the top of each data series list of datasets
        description:  Data describing the administrative divisions of a location, usually a country, including the names and unique identifiers, usually p-codes, of each administrative division. To be considered "ready", and included here, the humanitarian community working in the location has to have endorsed a perferred set of administrative boundaries as the <a href="https://en.wikipedia.org/wiki/Common_Operational_Datasets" target="_blank">Common Operational Dataset</a>.  Other, non-endorsed datasets for administrative divisions may also be available on HDX. More information on the status of a location's Common Operaational Datasets may be found <a href="https://data.humdata.org/cod" target="_blank">here</a>.  #the definition of the data series. 
        type: #for v2. we may want to distinguish between 'preparedness' and 'crisis' at the data series level
        rules:  #the set of 'include' and 'exclude' rules that determine what datasets appear in the data series
          include: #a list of queries (OR between each list item) that create a list of datasets to include in the data series.  
          #NOTE: the location query is not included here, but should be included with ALL of the "include" list items. 
              - (tags:"administrative divisions" AND tags:"common operational dataset - cod" AND subnational:1)
          exclude: # There are no exclude rules in this data series.
        metadata_overrides: #for v2.  a list of settings at the dataset level which forces the dataset to be included and controls how it is displayed in data grid.  This is where information coming from "manual curation" is stored (unless we decide to build it as a db).
          - dataset_id:  #id of dataset to include and override
            display_state:  #a string that determines how the dataset will be displayed in datagrid.  Might split this into several states like "query match state", "freshness state", "definition state", "geo extent state"
            comments: # a string to pop up on hover over a dataset in the grid.  this would contain comments from whoever did the curation about limitations of the dataset
  - name: physical_infrastructure 
    title: Physical Infrastructure
    description: Data describing the location and nature of key physical infrastructure such as transportation facilities, roads, communications facilities, etc.
    data_series:
      - name:  roads
        title: Roads
        description:  Geographic data describing the location of roads with some indication of the importance of each road segment in the transportation network.  The data should exclude or indicate roads that not usable by typical four-wheel-drive vehicles (footpaths, etc.).
        type:
        rules:
          include:
              - (tags:"roads" AND tags:"transportation" AND subnational:1)
          exclude:
      - name: aerodromes
        title: Aerodromes
        description: Geographic data representing all operational aerodromes (airports and helicopter landing zones) including a name or other unique identifier and an indication of what types of aircraft can use each
        rules:
          include: 
            - ((helicopter landing zone - hlz OR airports) AND subnational:1)
          exclude:
  - name: socio-economic
    title: Population and Socio-economic Indicators
    description: Data regarding baseline population numbers and key indicators relating to social and economic factors
    data_series:
      - name: population
        title: Population
        description: Total population aggregated by administrative division
        rules:
          include:
            - (tags:"demographics" AND tags:"population" AND subnational:1)
          exclude:
            - (organization:"worldpop" AND title:/.* - Population/ AND res_format:"zipped geotiff") #note, the regex portion of this query "should" work, but isn't in our case.  Possibly an issue about the type of field in solr?  https://stackoverflow.com/questions/14882188/how-to-use-regex-for-querying-in-solr-4  If the field is tokenized, it cannot be searched across word boundaries. 
      - name: population-sadd
        title: Population by Age and Sex
        description: Total population disaggregated age and sex categories, aggregated by administrative division
        rules:
          include:
            - (tags:"demographics" AND tags:"population" AND tags:"sex and age disaggregated data - sadd" AND subnational:1)
          exclude:
      - name: poverty_rate
        title: Poverty Rate
        description: Population living under a defined poverty threshold, aggregated by administrative division and represented as a percentage of total population or as an absolute number
        rules:
          include:
            - (tags:poverty AND subnational:1)
          exclude:



